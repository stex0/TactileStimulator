import TactileStimulator
import time


stim = TactileStimulator.Stimulator("COM15", max_amplitude=2000, debug=False)

siglist2 = [0, 0, 0, 0, 4095, 4095, 4095, 4095, 0, 0, 0, 0, 4095, 4095, 4095, 4095, 0, 0, 0, 0, 4095, 4095, 4095, 4095,
           0, 0, 0, 0, 4095, 4095, 4095, 4095, 0, 0, 0, 0, 0, 0,
           0, 0, 0, 0, 4095, 4095, 4095, 4095, 4095, 4095, 4095, 4095, 4095, 4095, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4095,
           4095, 4095, 4095, 4095, 4095, 4095, 4095, 4095, 4095, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 100, 200, 300, 400, 500,
           600, 700, 800, 900, 1000, 1100, 1200, 1300, 1400, 1500, 1600, 1700, 1800, 1900, 2000, 2100, 2200, 2300, 2400,
           2500, 2600, 2700, 2800, 2900, 3000, 3100, 3200, 3300, 3400, 3500, 3600, 3700, 3800, 3900, 4000, 3900, 3800,
           3700, 3600, 3500, 3400, 3300, 3200, 3100, 3000, 2900, 2800, 2700, 2600, 2500, 2400, 2300, 2200, 2100, 2000,
           1900, 1800, 1700, 1600, 1500, 1400, 1300, 1200, 1100, 1000, 900, 800, 700, 600, 500, 400, 300, 200, 100, 0,
           0, 0, 0, 0, 0, 500, 500, 500, 500, 500, 1000, 1000, 1000, 1000, 1000, 1500, 1500, 1500, 1500, 1500, 2000,
           2000, 2000, 2000, 2000, 2500, 2500, 2500, 2500, 2500, 3000, 3000, 3000, 3000, 3000, 3500, 3500, 3500, 3500,
           3500, 4000, 4000, 4000, 4000, 4000, 2000, 2000, 2000, 2000, 0]
siglist1 = [1000, 1100,  1600, 1700, 1800, 1900, 2000,
           2500, 2600, 2700, 2800, 2900, 3000, 3100, 3200, 3300, 3400, 3500, 3600, 3700, 3800, 3900, 4000, 3900, 3800,
           3700, 3600, 3500, 3400, 3300, 2500, 2400, 2300,
           1900, 1800, 1700, 1100, 1000]
maximum = 4095

time.sleep(0.5)
end = False

i1 = 0
i2 = 12
i3 = 20
i4 = 30
while True:
    for i, element in enumerate(siglist2):
        stim.write_array_slave([element]*8)
        time.sleep(0.005)
        stim.write_array_master([element]*8)
        time.sleep(1.0/30.0)
        # stim.write_single(8, element)
        # time.sleep(0.1)
        # stim.write_single(15, element)
        # time.sleep(0.1)

while True:
    # list(range(1000, 4000, 40)) + list(range(4000, 1000, -40))

    stim.write_array_master([siglist[i1], siglist[i2], siglist[i3], siglist[i4], 0, 0, 0, 0])
    time.sleep(0.05)
    stim.write_array_slave([i1, 0, 0, 0, 0, 0, 0, 0])
    time.sleep(0.05)

    i1 += 1
    i2 += 1
    i3 += 1
    i4 += 1
    if i4 >= len(siglist)-100:
        i4 = 0
    if i3 >= len(siglist)-100:
        i3 = 0
    if i2 >= len(siglist)-100:
        i2 = 0
    if i1 >= len(siglist)-100:
        i1 = 0

time.sleep(1)
stim.write_all_channels_equal(0)